## 基本流程

### 1、网络请求

- DNS 解析，根据域名获得 IP 地址

- 建立 TCP 连接 “三次握手”

- 发送 http 请求
- 服务端：nginx代理转发、接收请求响应、用户身份校验、操作DB、给客户端下发资源

- 客户端：获得网页 html 资源、静态资源（js、css、img）可能会命中 http 缓存。

- 浏览器解析静态资源：CSS样式（包括内嵌CSS、外链 CSS）、解析`<script>`标签（包含同步、异步）、并行解析 img 等媒体文件。

  

### 2、浏览器渲染

![](https://img.smyhvae.com/20180310_1257.png)

渲染过程中，涉及到以下几个概念和阶段：

- DOM树（DOM Tree）：浏览器将HTML标签解析成树形的数据结构。DOM树包含了有哪些节点，以及节点之间的从属关系（嵌套关系）。

- CSSOM（CSS Rule Tree）：浏览器将CSS解析成树形的数据结构。CSSOM包含了节点的CSS样式（大小、颜色等）。

- 渲染树（Render Tree）: DOM 树与 CSSOM 树**合并**后形成渲染树。渲染树只包含渲染网页所需的节点（但并不知道位置）。

- 布局（Layout）: 计算出每个节点在屏幕中的**位置和大小**。

- 绘制（Painting）：按照算出来的规则，通过显卡，把内容画出来。

- composite：合成。浏览器在绘制的时候，一开始不会把所有的内容都画在同一层上。需要把这些内容画在不同的曾上，最终合并到一起，并显示在屏幕上。

> 备注：此问题的细节追问，详见本教程的另一篇文章《性能优化/浏览器渲染机制&重排和重绘.md》