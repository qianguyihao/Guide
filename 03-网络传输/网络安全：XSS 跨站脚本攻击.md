


## XSS的基本概念

XSS（Cross Site Scripting）：**跨站脚本攻击**。

> 预备知识：HTTP、Cookie、Ajax。


## XSS的攻击原理

XSS攻击的核心原理是：不需要你做任何的登录认证，它会通过合法的操作（比如在url中输入、在评论框中输入），向你的页面注入脚本（可能是`<script>`脚本、html标签等）。

最后导致的结果可能是：

- 盗用Cookie信息

- 破坏页面的正常结构，插入广告等恶意内容

- D-doss攻击

## XSS的攻击方式

- 1、反射型

发出请求时，XSS代码出现在url中，作为输入提交到服务器端，服务器端解析后响应，XSS代码随响应内容一起传回给浏览器，最后浏览器解析执行XSS代码。这个过程像一次反射，所以叫反射型XSS。

- 2、存储型

存储型XSS和反射型XSS的差别在于，提交的代码会存储在服务器端（数据库、内存、文件系统等），下次请求时目标页面时不用再提交XSS代码。

## XSS的防范措施（encode + 过滤）

### 1、转义特殊字符

比如：

-  `<`转义为`&lt; `
- `>`转义为`&gt;`

在代码中进行转义之后，script代码就会变成`<script>xxx</script>`字符串文本，而不会作为脚本执行。

### 2、过滤用户输入

- 过滤用户输入的Script节点、Style节点、Iframe节点。（尤其是Script节点，它可是支持跨域的呀，一定要移除）。
- 过滤用户输入的与事件相关的属性。如onerror可以自动触发攻击，还有onclick等。（总而言之，过滤掉一些不安全的内容）



## 其他

关于XSS，推荐几个网站：

- <http://html5sec.org/>

里面列出了很多XSS的例子，可以长见识。如果你专门研究XSS，可以看看。

- [FreeBuf网站上的专栏作者：Black-Hole](http://www.freebuf.com/author/black-hole)

比如，他的第一篇文章就讲到了[XSS的原理分析与解剖](http://www.freebuf.com/articles/web/40520.html)。有句话摘抄如下：弹窗只是测试xss的存在性和使用性。

比如，这个人还有篇文章写[自动化检测CSRF（第一章）](http://www.freebuf.com/articles/web/107207.html)。大公司做网站，一般会做嗅探服务（比如自动化工具做CSRF的检测、自动化的方式控制安全风险）。

另外，可能还有些工具，可以扫描代码本身有没有一些安全问题。

- [GitHub | Cure53](https://github.com/cure53)

这是GitHub上的一个德国组织。

上面的项目都跟安全相关，有些仓库是可以直接运行的。如果你不需要定制，就可以直接用别人的，没必要自己写XSS库、XSS的过滤之类的，避免麻烦。

