## 小程序的性能优化，有哪些方式

### 分包机制

- 主包+分包机制，减小主包体积。
- 分包预加载
- 独立分包

### 减小代码文件的体积

1、找出已下线的页面，并删掉；找出未使用的文件、函数，并删掉。

2、非核心的页面采用H5

3、本地图片转CDN

4、接口聚合，逻辑后移：将部分逻辑移到后端



### JS代码角度

1、 data 对象里，只设置在 html 需要使用的变量，避免不当使用setData。其他数据设置为普通变量即可。

2、父子组件通信：如果需要传输大量的数据对象，不建议使用props，可以使用 selectComponent().updateStatus()

3、CSS不要嵌套太深，最多三级，建议两级。

4、如果子组件的逻辑较少，则不要抽离成一个组件，可以使用 template。

5、页面被隐藏后，需要及时清除定时器，释放资源，防止重复注册。

6、不轻易引入第三方库，避免引入无关的代码。如果第三方组件可以支持良好的 tree-shaking 就另当别论。





## 参考链接

- [小程序工程化探索](https://mp.weixin.qq.com/s/_NSJTQ-4-8gTnwTVK-tn0A)
- [京喜小程序最佳实践：我是如何写超大型小程序代码的](https://mp.weixin.qq.com/s/tJN3Yz6usSt9LG37_pN7dw)
- [微信小程序性能优化入门指南 - SegmentFault 思否](https://segmentfault.com/a/1190000016901634)



